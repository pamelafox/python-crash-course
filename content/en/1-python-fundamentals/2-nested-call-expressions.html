
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Python Course: Nested call expressions</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <style>
  img {
    display: block;
    margin-bottom: 12px;
    max-width: 800px;
  }
  pre {
    background: #eee;
    padding: 8px;
  }
  </style>
</head>
<body>
<div class="container container-md">
<h1>Nested call expressions</h1>
<h3>Anatomy of a call expression</h3>
<p>Before we dive into more complex call expressions, let's first understand a simple call expression more deeply. Remember, a call expression is any expression that calls a function, like <code>pow(2, 100)</code>. The diagram below is for a call expression using the <code>add</code> function.</p>
<p><img src="https://corise.com/static/course/python-crash-course/assets/cl1135hu9013s116mfug4183d/Screen Shot 2022-03-21 at 12.12.39 PM.png">Here's how Python evaluates that call expression:</p>
<ol><li><p>It first evaluates the <bold>operator</bold>. In this case, it sees that it's a function named <code>add</code>, checks to see if an <code>add</code> function is accessible in the current environment, and remembers whatever function definition it finds.</p></li>
<li><p>It then evaluates the <bold>operands</bold>, in order. Above, they are both simple numbers, so it first evaluates the number 18 and then the number 69. Since those are simple number values and not expressions themselves, it doesn't have to do much work here!</p></li>
<li><p>Finally, it <bold>applies</bold> the operator (a function) to the operands (values), according to the function definition. The above expression calls the add function on the values 18 and 69 and returns whatever is computed by that function.</p></li></ol>
<p>TODO: Quiz</p>
<h3>Nested call expressions</h3>
<p>Now let's look at a <bold>nested call expression</bold>: a call expression where the expressions themselves are <italic>also</italic> call expressions.</p>
<p><img src="https://corise.com/static/course/python-crash-course/assets/cl0bvlz8u001d146653rz69u0/Screen Shot 2021-12-20 at 1.11.32 PM (2).png"></p>
<p>If we were asked to evaluate that as a human, logically, we'd realize that we can't compute the outer <code>add</code> function until we know the operands, and we can't even compute that inner <code>add</code> function until we know the result of the first <code>mul</code> operation.</p>
<p>So we might start from the inside out, computing like this:</p>
<pre><code>add(add(6, mul(4, 6)), mul(3, 5))
add(add(6,    24    ), mul(3, 5))
add(add(6,    24    ), mul(3, 5))
add(        30       , mul(3, 5))
add(        30       , mul(3, 5))
add(        30       ,    15    )
add(        30       ,    15    )
45</code></pre>
<p>The computer takes a similar approach, creating an <bold>expression tree</bold>. It applies the same 3-step process from before to each call expression in the tree, starting with the bottom-most expressions, until it's able to finally do the final computation.</p>
<p><img src="https://corise.com/static/course/python-crash-course/assets/cl1138lc3013u116mb1s4axov/Screen Shot 2022-03-21 at 12.15.20 PM.png">üì∫  Here's <link>a video walkthrough</link> of that call expression tree which shows the order of the calls and return values.</p>
<p>TODO: Quiz</p>
<h3>Exercise: Operator expressions</h3>
<p>The following expressions are written entirely with arithmetic operators. Rewrite them using the following functions from the <code>operator</code> module: <code>add</code>, <code>sub</code>, <code>mul</code>, <code>truediv</code>, <code>floordiv</code>, and <code>mod</code>. You may find this <link>table that maps operators to functions</link> particularly helpful.</p>
<ul><li><p><code>30 + 2</code></p></li>
<li><p><code>30 - 2</code></p></li>
<li><p><code>30 * 2</code></p></li>
<li><p><code>30 / 2</code></p></li>
<li><p><code>30 // 2</code></p></li>
<li><p><code>30 % 2</code></p></li>
<li><p><code>30 + (2 * 4)</code></p></li>
<li><p><code>3 * (10 - 2)</code></p></li>
<li><p><code>(3 ** (365/52)) - 1</code></p></li>
<li><p><code>(25 // 4) - (25 / 4)</code></p></li></ul>
<pre><code>from operator import add, sub, mul, truediv, floordiv, mod

# After adding a call expression, run code to see if its correct
add(30, 2)</code></pre>
<hr>
<p>üôãüèΩ üôãüèª‚Äç‚ôÄÔ∏è üôãüèø‚Äç‚ôÇÔ∏è  If you have any questions about the content in this article, just post in the #questions channel on Slack. Please post when you have questions, we're here to help!</p>
</div>
</body>
</html>
